{% extends 'mainapp/base.html' %}

{% block title %}{{ "OutlayRT" }}{% endblock %}

{% block body_block %}

{% if user.is_authenticated %}
        <h1>Welcome to your dashboard {{ user.username }}</h1>

     <strong>Your repos</strong><br />


    {% if repos %}
        <ul>
            {% for repo in repos %}
            <!-- Following line changed to add an HTML hyperlink -->
            <li><a href="/OutlayRT/{{ repo.url }}">{{ repo.name }}</a></li>
            {% endfor %}
        </ul>
    {% else %}
        <strong>There are no repos present.</strong>
    {% endif %}

    <h1>Add an Expense</h1>

    <form id="category_form" method="post" action="">

        {% csrf_token %}
        {% for hidden in expense_form.hidden_fields %}
            {{ hidden }}
        {% endfor %}

        {% for field in expense_form.visible_fields %}
            {{ field.errors }}
            {{ field.help_text }}
            {{ field }}
        {% endfor %}

        <input type="submit" name="expense" value="Add Expense" />
    </form>

    <h1>Add a Repo</h1>

    <form id="category_form" method="post" action="">

        {% csrf_token %}
        {% for hidden in repo_form.hidden_fields %}
            {{ hidden }}
        {% endfor %}

        {% for field in repo_form.visible_fields %}
            {{ field.errors }}
            {{ field.help_text }} {{ field }}
            
        {% endfor %}
        

        <input type="submit" name="repo" value="add repo" />
    </form>

    <h2> Your Macros </h2>
    {% if macros %}
        <ul>
            {% for key, value in macros.items %}
            <!-- Following line changed to add an HTML hyperlink -->
            <li>{{ key }} : {{ value }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <h1>Add a Macro</h1>

    <form id="category_form" method="post" action="">

        {% csrf_token %}
        {% for hidden in macro_form.hidden_fields %}
            {{ hidden }}
        {% endfor %}

        {% for field in macro_form.visible_fields %}
            {{ field.errors }}
            {{ field.help_text }} {{ field }}
            
        {% endfor %}
        

        <input type="submit" name="repo" value="add macro" />
    </form>

{% endif %}

{% endblock %}